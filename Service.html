<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Your Vehicle Service</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      background: #000;
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
    }

    .container {
      position: relative;
      width: 90%;
      max-width: 900px;
      aspect-ratio: 16 / 9;
      padding: 8px; /* Padding slightly reduces video area */
      border-radius: 20px;
      background: linear-gradient(135deg, #1c1c1e, #2c2c2e);
      box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.1), 0 12px 30px rgba(0, 0, 0, 0.6);
      overflow: hidden; /* Important to contain absolutely positioned children */
    }

    video {
      width: 100%;
      height: 100%;
      border-radius: 16px; /* Match container inner radius */
      display: block;
      object-fit: cover; /* Ensure video covers the area */
    }

    /* Logo initial position and animation */
    .logo {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20%; /* 20% of the container width */
      transform: translate(-50%, -50%);
      transition: top 1s ease-out, left 1s ease-out, right 1s ease-out, width 1s ease-out, transform 1s ease-out;
      z-index: 10;
      opacity: 1;
    }

    /* Logo moved to top-right corner */
    .logo.moved {
      top: 10px;
      left: auto; /* Unset left */
      right: 10px;
      width: 5%; /* 5% of the container width */
      transform: translate(0, 0); /* Override centering transform */
    }

    /* Button container styling */
    .button-container {
      position: absolute;
      bottom: 10%;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px; /* Reduced gap might look better with fewer buttons */
      opacity: 0;
      transition: opacity 0.5s ease;
      z-index: 20;
      pointer-events: none;
      width: 90%;
    }

    .button-container.show {
      opacity: 1;
      pointer-events: auto;
    }

    /* Button styling */
    .button {
      padding: 12px 24px;
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.3s ease;
      box-shadow: 0 4px 10px rgba(0,0,0, 0.3);
    }

    .button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(0,0,0, 0.4);
    }

    .button:active {
      transform: scale(0.97);
      box-shadow: 0 2px 5px rgba(0,0,0, 0.3);
    }

    /* Style for disabled buttons */
    .button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none; /* Prevent hover/active effects */
        box-shadow: 0 4px 10px rgba(0,0,0, 0.3); /* Keep base shadow */
    }


    .green-button {
      background: linear-gradient(135deg, #34c759, #2aa14a);
    }

    .question-button {
      background: linear-gradient(135deg, #007aff, #0058b8);
    }

    /* Removed .third-button style as it's no longer needed */

    /* Fireworks canvas */
    .fireworks {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 30;
      border-radius: 16px;
    }

    /* Confirmation Message styles */
    .confirmation-message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      background-color: rgba(0, 0, 0, 0.75);
      padding: 25px 40px;
      border-radius: 15px;
      font-size: 22px;
      font-weight: 600;
      text-align: center;
      z-index: 35; /* Above fireworks */
      opacity: 0; /* Start hidden */
      pointer-events: none;
      transition: opacity 0.5s ease-in-out;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    }

    /* Class to show the confirmation message */
    .confirmation-message.show {
      opacity: 1;
    }

  </style>
</head>
<body>

  <div class="container" id="videoContainer">
    <video id="myVideo" playsinline controls>
      <!-- Make sure this path is correct -->
      <source src="https://raw.githubusercontent.com/dchrystall/video/main/lexusshort.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>

    <!-- Make sure this path is correct -->
    <!--<img src="https://dchrystall.github.io/video/lexusLogo.png" alt="Lexus Logo" class="logo" id="logo"> -->
    <img src=https://raw.githubusercontent.com/dchrystall/video/main/lexusLogo.png" alt="Lexus Logo" class="logo" id="logo">
    <div class="button-container" id="buttonContainer">
      <button class="button green-button" id="yesButton">Yes, go ahead</button>
      <button class="button question-button" id="questionButton">I have a Question</button>
      <!-- Removed the third button -->
      <!-- <button class="button third-button" id="thirdButton">Third Button</button> -->
    </div>

    <canvas id="fireworksCanvas" class="fireworks"></canvas>

    <!-- Confirmation message element -->
    <div id="confirmationText" class="confirmation-message">
        We will go right ahead
    </div>

  </div>

  <script>
    const video = document.getElementById('myVideo');
    const logo = document.getElementById('logo');
    const buttonContainer = document.getElementById('buttonContainer');
    const yesButton = document.getElementById('yesButton');
    const questionButton = document.getElementById('questionButton');
    // Removed reference to thirdButton
    // const thirdButton = document.getElementById('thirdButton');
    const fireworksCanvas = document.getElementById('fireworksCanvas');
    const videoContainer = document.getElementById('videoContainer');
    const confirmationText = document.getElementById('confirmationText');
    const ctx = fireworksCanvas.getContext('2d');

    let logoMoveTimerId = null;

    // Adjust canvas size to match container
    function resizeCanvas() {
        const containerWidth = videoContainer.offsetWidth;
        const containerHeight = videoContainer.offsetHeight;
        fireworksCanvas.width = containerWidth;
        fireworksCanvas.height = containerHeight;
    }

    window.addEventListener('load', resizeCanvas);
    window.addEventListener('resize', resizeCanvas);

    // Function to move the logo
    function moveLogo() {
      logo.classList.add('moved');
    }

    // Function to reset logo
    function resetLogo() {
        logo.classList.remove('moved');
        if (logoMoveTimerId) {
            clearTimeout(logoMoveTimerId);
            logoMoveTimerId = null;
        }
    }

    // Function to check and SHOW buttons
    function checkButtonVisibility() {
        if (video.duration && !isNaN(video.duration) && video.duration > 0) {
            if (video.duration - video.currentTime <= 3) {
                if (!buttonContainer.classList.contains('show')) {
                   buttonContainer.classList.add('show');
                }
            }
        } else {
            buttonContainer.classList.remove('show');
        }
    }

    // --- Event Listeners ---

    video.addEventListener('play', () => {
        if (!logo.classList.contains('moved') && !logoMoveTimerId && video.currentTime < 3) {
            logoMoveTimerId = setTimeout(() => {
                moveLogo();
                logoMoveTimerId = null;
            }, 3000);
        }
        checkButtonVisibility();

        confirmationText.classList.remove('show');
        // Re-enable remaining buttons
        yesButton.disabled = false;
        questionButton.disabled = false;
        // Removed thirdButton disable/enable
        // thirdButton.disabled = false;
    });

    video.addEventListener('pause', () => {
        if (logoMoveTimerId) {
            clearTimeout(logoMoveTimerId);
            logoMoveTimerId = null;
        }
        checkButtonVisibility();
    });

    video.addEventListener('timeupdate', checkButtonVisibility);

    video.addEventListener('loadedmetadata', () => {
        resizeCanvas();
        resetLogo();
        checkButtonVisibility();
        if (video.duration && (video.currentTime < video.duration - 3)) {
             buttonContainer.classList.remove('show');
        }
        confirmationText.classList.remove('show');
    });

    video.addEventListener('ended', () => {
        resetLogo();
        if (!buttonContainer.classList.contains('show')) {
            buttonContainer.classList.add('show');
        }
    });

    video.addEventListener('seeking', () => {
         confirmationText.classList.remove('show');
    });

     video.addEventListener('seeked', () => {
        // Logo Reset/Move Logic
        if(video.currentTime >= 3 && !logo.classList.contains('moved')) {
            moveLogo();
        } else if (video.currentTime < 3 && logo.classList.contains('moved')){
            resetLogo();
        }

        // Button Visibility Logic on Seek
        if (video.duration && !isNaN(video.duration) && video.duration > 0) {
             checkButtonVisibility();
             if (video.currentTime < (video.duration - 3)) {
                 buttonContainer.classList.remove('show');
             }
        } else {
             buttonContainer.classList.remove('show');
        }
        confirmationText.classList.remove('show');
    });


    // --- Button Actions ---

    // Open messaging app
    questionButton.addEventListener('click', () => {
      window.location.href = 'sms:5083108004';
    });

    // Updated: Fireworks, Text Display, and Close Tab on "Yes" button click
    yesButton.addEventListener('click', () => {
      createFireworks();
      confirmationText.classList.add('show');

      // Disable remaining buttons
      yesButton.disabled = true;
      questionButton.disabled = true;
      // Removed thirdButton disable
      // thirdButton.disabled = true;

      setTimeout(() => {
        confirmationText.classList.remove('show');
        console.log("Attempting to close tab...");
        window.close();
        // Note: window.close() likely won't work unless the script opened the window.
      }, 3000);
    });

    // --- Fireworks Animation ---
    function createFireworks() {
        const particles = [];
        const numParticles = 100;
        const explosionX = fireworksCanvas.width / 2;
        const explosionY = fireworksCanvas.height / 2;
        const colors = ['#ff0044', '#00ff44', '#4400ff', '#ff8800', '#00ff88', '#ffffff'];

        function Particle(x, y, color) {
            this.x = x; this.y = y; this.color = color; this.size = Math.random() * 3 + 1; const angle = Math.random() * Math.PI * 2; const speed = Math.random() * 5 + 2; this.speedX = Math.cos(angle) * speed; this.speedY = Math.sin(angle) * speed; this.life = 80 + Math.random() * 40; this.initialLife = this.life; this.gravity = 0.08;
        }
        Particle.prototype.update = function() {
            this.life--; this.speedY += this.gravity; this.x += this.speedX; this.y += this.speedY; this.opacity = Math.max(0, this.life / this.initialLife);
        };
        Particle.prototype.draw = function() {
             ctx.fillStyle = this.color; ctx.globalAlpha = this.opacity; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill(); ctx.globalAlpha = 1.0;
        };
        for (let i = 0; i < numParticles; i++) { particles.push(new Particle(explosionX, explosionY, colors[Math.floor(Math.random() * colors.length)])); }
        function animateFireworks() {
             ctx.fillStyle = 'rgba(0, 0, 0, 0.15)'; ctx.fillRect(0, 0, fireworksCanvas.width, fireworksCanvas.height); let stillAlive = false; for (let i = particles.length - 1; i >= 0; i--) { particles[i].update(); particles[i].draw(); if (particles[i].life > 0) { stillAlive = true; } else { particles.splice(i, 1); } } if (stillAlive) { requestAnimationFrame(animateFireworks); }
        }
        requestAnimationFrame(animateFireworks);
    }

  </script>

</body>
</html>